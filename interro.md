| #  | Question                                                                              | Réponse synthétique                                                                                                                                                                                      |
|----|---------------------------------------------------------------------------------------| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1  | Différencie image, conteneur, volume, réseau.                                         | **Image** = modèle immuable ; **conteneur** = instance en exécution ; **volume** = stockage persistant hors cycle de vie du conteneur ; **réseau** = couche d’interconnexion virtuelle entre conteneurs. |
| 2  | Différence entre `CMD` et `ENTRYPOINT`.                                               | `ENTRYPOINT` définit le binaire principal ; `CMD` fournit les arguments par défaut, modifiables à l’exécution.                                                                                           |
| 3  | Pourquoi privilégier un multi-stage build ?                                           | Réduit la taille finale, supprime dépendances inutiles, sépare build et runtime.                                                                                                                         |
| 4  | Que fait `docker system prune -a` ?                                                   | Supprime images, conteneurs, volumes et réseaux non utilisés — dangereux car détruit des ressources persistantes.                                                                                        |
| 5  | Que signifie `--no-cache` lors d’un build ?                                           | Force la reconstruction complète sans utiliser les couches précédemment mises en cache.                                                                                                                  |
| 6  | Qu’apporte `USER node` dans un Dockerfile ?                                           | Exécution en utilisateur non-root pour réduire la surface d’attaque et les privilèges.                                                                                                                   |
| 7  | Pourquoi un `.dockerignore` est-il indispensable ?                                    | Évite d’inclure des fichiers inutiles ou sensibles, accélère le build, réduit la taille de l’image.                                                                                                      |
| 8  | Que se passe-t-il quand un conteneur est détruit mais que le volume existe toujours ? | Les données persistent, car le volume n’est pas supprimé automatiquement.                                                                                                                                |
| 9  | À quoi sert `depends_on` et pourquoi ne remplace-t-il pas un healthcheck ?            | Gère l’ordre de démarrage mais ne garantit pas que le service soit prêt ; `healthcheck` valide l’état réel.                                                                                              |
| 10 | Pourquoi séparer les réseaux front/back est une mesure de sécurité ?                  | Isole la base de données du front-end, limite la surface d’exposition et les risques d’accès directs.                                                                                                    |
| 11 | Différences entre `COPY` et `ADD`.                                                    | `COPY` copie strictement des fichiers locaux ; `ADD` peut extraire des archives et télécharger depuis une URL — usage déconseillé sauf besoin spécifique.                                                |
| 12 | Que fait `docker compose config` ?                                                    | Valide et fusionne les fichiers Compose, affiche la configuration finale interprétée.                                                                                                                    |
| 13 | Différence entre image “slim” et “alpine”.                                            | “slim” conserve les outils de base ; “alpine” est une image très légère basée sur musl, parfois incompatible avec certains binaires.                                                                     |


| #  | Actions usuelles                                                                                          | Réponse synthétique                                                                                                                                                                                       |           |
|----|-----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| --------- |
| 1  | Supprimer tous les conteneurs arrêtés sans supprimer les volumes.                                         | `docker container prune -f`                                                                                                                                                                               |           |
| 2  | Comment voir l'état des conteneurs de son système                                                         | `docker ps -a`, `ctop` , `lazydocker`                                                                                                                                                                           |           |
| 3  | Exécuter une commande ponctuelle dans un conteneur en cours.                                              | `docker exec -it <container> <commande>`                                                                                                                                                                  |           |
| 4  | Lancer une image en lecture seule                                                                         | `docker run --read-only alpine"` → erreur “Read-only file system”.                                                                                                                                        |           |
| 5  | Construire une image taggée `v1` et `latest`, puis la pousser.                                            | `docker build -t user/app:v1 -t user/app:latest . && docker push user/app --all-tags`                                                                                                                     |           |
| 6  | Voir la liste des images disponibles sur un système                                                       |                                                                                                                                                                                                           |           |
| 7  | Inspecter le réseau d’un conteneur et son IP.                                                             | `docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container>`                                                                                                                |           |
| 8  | Vérifier la valeur de `NODE_ENV` dans un conteneur.                                                       | `docker exec <container> printenv NODE_ENV`                                                                                                                                                               |           |
| 9  | Créer un volume `backup`, l’attacher à MySQL, insérer données, supprimer conteneur, vérifier persistance. | `docker volume create backup` → lancer MySQL avec `-v backup:/var/lib/mysql` → insérer données → supprimer conteneur → relancer → données présentes.                                                      |           |
| 10 | Conteneur `alpine` connecté à deux réseaux et vérifier connectivité.                                      | `docker network create net1 && docker network create net2 && docker run -it --name test --network net1 alpine` → `docker network connect net2 test` → `docker exec test ip a` → deux interfaces visibles. |           |



| #  | Actions usuelles                                                                                          | Réponse synthétique                                                                                                                                                            |                |
| -- | --------------------------------------------------------------------------------------------------------- |--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| -------------- |
| 1  | Supprimer tous les conteneurs arrêtés sans supprimer les volumes.                                         | `docker container prune -f`                                                                                                                                                    |                |
| 2  | Voir l’état des conteneurs de son système.                                                                | `docker ps -a`, ou outils interactifs `ctop`, `lazydocker`.                                                                                                                    |                |
| 3  | Exécuter une commande ponctuelle dans un conteneur en cours.                                              | `docker exec -it <container> <commande>`                                                                                                                                       |                |
| 4  | Lancer une image en lecture seule.                                                                        | `docker run --read-only alpine sh` → toute écriture provoque “Read-only file system”.                                                                                          |                |
| 5  | Construire une image taggée `v1` et `latest`, puis la pousser.                                            | `docker build -t user/app:v1 -t user/app:latest . && docker push user/app --all-tags`                                                                                          |                |
| 6  | Voir la liste des images disponibles sur un système.                                                      | `docker images` ou `docker image ls`                                                                                                                                           |                |
| 7  | Inspecter le réseau d’un conteneur et son IP.                                                             | `docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container>`                                                                                     |                |
| 8  | Vérifier la valeur de `NODE_ENV` dans un conteneur.                                                       | `docker exec <container> printenv NODE_ENV`                                                                                                                                    |                |
| 9  | Créer un volume `backup`, l’attacher à MySQL, insérer données, supprimer conteneur, vérifier persistance. | `docker volume create backup` → lancer MySQL avec `-v backup:/var/lib/mysql` → insérer données → supprimer conteneur → relancer → données présentes.                           |                |
| 10 | Conteneur `alpine` connecté à deux réseaux et vérifier connectivité.                                      | `docker network create net1 && docker network create net2 && docker run -it --name test --network net1 alpine` → `docker network connect net2 test` → `docker exec test ip a`. |                |
| 11 | Supprimer toutes les images non utilisées.                                                                | `docker image prune -a -f`                                                                                                                                                     |                |
| 12 | Lister les volumes et vérifier leur taille.                                                               | `docker volume ls` et `docker system df -v`                                                                                                                                    |                |
| 13 | Supprimer un volume spécifique.                                                                           | `docker volume rm <nom_volume>`                                                                                                                                                |                |
| 14 | Voir les logs en continu d’un conteneur.                                                                  | `docker logs -f <container>`                                                                                                                                                   |                |
| 15 | Rejoindre un shell interactif dans un conteneur.                                                          | `docker exec -it <container> /bin/sh` ou `/bin/bash`                                                                                                                           |                |
| 16 | Supprimer un conteneur en cours d’exécution de force.                                                     | `docker rm -f <container>`                                                                                                                                                     |                |
| 20 | Voir l’espace disque utilisé par Docker.                                                                  | `docker system df`                                                                                                                                                             |                |
| 21 | Nettoyer tout le cache de build.                                                                          | `docker builder prune -f`                                                                                                                                                      |                |
| 26 | Voir les ports exposés d’un conteneur.                                                                    | `docker port <container>`                                                                                                                                                      |                |
| 27 | Voir la configuration d’un `docker-compose.yml` interprétée.                                              | `docker compose config`                                                                                                                                                        |                |
| 28 | Relancer tous les services d’un projet Compose.                                                           | `docker compose up -d --build`                                                                                                                                                 |                |
| 29 | Supprimer tous les services et volumes d’un projet Compose.                                               | `docker compose down -v`                                                                                                                                                       |                |
| 30 | Tester la santé d’un conteneur.                                                                           | `docker inspect --format='{{.State.Health.Status}}' <container>`                                                                                                               |                |




| #  | — Sécurité et Production                                       | Réponse synthétique                                                                                                                         |
| -- |----------------------------------------------------------------| ------------------------------------------------------------------------------------------------------------------------------------------- |
| 1  | Quels risques avec `--privileged`                              | Donne accès total au noyau hôte, possibilité de monter / modifier le système, annule l’isolation — à proscrire hors cas de debug matériel.  |
| 2  | Pourquoi éviter le tag `latest` en production                  | Pas de version figée, empêche la reproductibilité et rend les déploiements non déterministes.                                               |
| 3  | Danger d'oublier un `.dockerignore` lorsqu'on publie une image | Fuite de secrets (clé, .env, node_modules, .git), ralentit build et augmente taille image.                                                  |
| 5  | Comment isoler un service interne                              | Utiliser un réseau dédié non exposé, option `internal: true`, ne pas mapper de ports, ne pas labelliser pour Traefik.                       |
| 6  | Comment injecter des secrets dans les conteneurs               | Fichier `.env` en local + injection à runtime, volumes chiffrés, `docker secret` (Swarm), ou intégration Vault via script d’injection.      |
| 7  | Différence host vs bridge network                              | `host`: partage le réseau de l’hôte, pas d’isolation ; `bridge`: réseau virtuel isolé avec NAT et DNS Docker.                               |
| 8  | Headers de sécurité d’un reverse proxy                         | `Strict-Transport-Security`, `X-Content-Type-Options`, `X-Frame-Options`, `Content-Security-Policy`, `X-XSS-Protection`.                    |
| 10 | Vérifications critiques avant déploiement                      | Exécution non-root, limites CPU/mémoire définies, ports explicites, healthcheck actif, réseau isolé, logs persistants, scan vulnérabilités. |

| #  | Analyse critique                                                  | Réponse synthétique                                                                                                                                 |
| -- |----------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| 1  | Donner 3 Antipatterns fréquents (Aka mauvaise pratique)                    | Exécution root, image géante (pas de multi-stage), absence de volume (perte données), variables en clair, `latest` non versionné.                   |
| 2  | Docker ≠ orchestrateur complet                                             | Pas de scaling natif, ni restart policy avancée, ni service discovery multi-hôte, ni load balancing intégré.                                        |
| 3  | Intérêt d’un registre privé                                                | Contrôle des versions internes, sécurité accrue, vitesse locale, conformité réglementaire, disponobilité                                            |
| 4  | Différence compose vs swarm                                                | Compose = orchestration mono-hôte ; Swarm = clustering multi-nœuds, réplication, scaling dynamique.                                                 |
| 5  | Build-time vs runtime secrets                                              | Build-time: injectés lors du build, non présents dans l’image finale ; Runtime: fournis à l’exécution via env ou volume.                            |
| 6  | Avantage inconvénient de la Docker/Compose vs Kubernetes                   | Docker simple, peu coûteux, mais sans auto-healing ni scaling. Kubernetes apporte orchestration complète, monitoring natif, mais complexité accrue. |
| 7  | Quel danger possible avec un conteneur compromis échappant à son isolement | Capabilities excessives, volume `/` monté, kernel vulnérable, conteneur en root → prise de contrôle hôte.                                           |
| 8  | Politique de mise à jour d’images                                          | Scan vulnérabilités (Trivy), rebuild régulier, test pré-déploiement, versionnement immuable, suppression images obsolètes.                          |
